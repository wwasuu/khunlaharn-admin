(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{616:function(e,t,a){__NEXT_REGISTER_PAGE("/gallery",function(){return e.exports=a(617),{page:e.exports.default}})},617:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a.n(n),c=a(27),o=a.n(c),s=a(1),l=a.n(s),i=a(11),u=a(122),p=a(52),d=a(39),f=a(21);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t,a,n,r,c,o){try{var s=e[c](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function h(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var c=e.apply(t,a);function o(e){g(c,n,r,o,s,"next",e)}function s(e){g(c,n,r,o,s,"throw",e)}o(void 0)})}}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var j=function(e){function t(){var e,a,n,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=this,c=(e=v(t)).call.apply(e,[this].concat(s)),a=!c||"object"!==m(c)&&"function"!=typeof c?x(n):c,w(x(x(a)),"state",{isShowUpload:!1,selectedImage:[],images:[]}),w(x(x(a)),"_getMedia",h(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.e.get();case 3:t=e.sent,a.setState({images:t.data.media?t.data.media:[]}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))),w(x(x(a)),"_removeMedia",h(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.state.selectedImage.length){e.next=3;break}return e.abrupt("return");case 3:return t=a.state.selectedImage.join(","),e.next=6,f.e.remove({media_ids:t});case 6:e.sent,a._getMedia(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}))),w(x(x(a)),"_hadleUpload",function(){var e=h(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new FormData,t.map(function(e){n.append("myfiles",e)}),e.next=5,f.d.upload(n);case 5:e.sent,a._getMedia(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()),w(x(x(a)),"_toggleShowUpload",function(){a.setState({isShowUpload:!a.state.isShowUpload})}),w(x(x(a)),"_selectImage",function(e){a.state.selectedImage.indexOf(e)>=0?a.setState({selectedImage:_(a.state.selectedImage.filter(function(t){return t!==e}))}):a.setState({selectedImage:_(a.state.selectedImage).concat([e])})}),w(x(x(a)),"_clearSelectedImage",function(){a.setState({selectedImage:[]})}),w(x(x(a)),"_renderSelectedIcon",function(e){return a.state.selectedImage.indexOf(e)>=0?l.a.createElement(i.a,{className:"selected _pst-asl _cl-positive _fs-4 _t-0px _r-0px",type:"check-square"}):null}),a}var a,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,l.a.Component),a=t,(n=[{key:"componentDidMount",value:function(){this._getMedia()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isShowUpload,n=t.selectedImage,r=t.images;return l.a.createElement(d.a,null,l.a.createElement("div",{className:"_bgcl-white"},l.a.createElement("div",{className:"_dp-f _jtfct-spbtw _pdh-16px _pdv-12px _cl-black _bgcl-gray-300"},l.a.createElement("div",{className:"_fs-4"},"เพิ่มคลังรูปภาพ")),l.a.createElement("div",{className:"jsx-4196647678 _pd-16px"},l.a.createElement("div",{className:"jsx-4196647678 _dp-f _fdrt-cl _alit-fst _mgbt-12px"},l.a.createElement(u.a,{className:"_w-128px",onClick:this._toggleShowUpload},"เพิ่มรูปภาพ")),n.length>0&&l.a.createElement("div",{className:"jsx-4196647678 _dp-f _mgbt-12px"},l.a.createElement(u.a,{className:"_w-128px _mgr-8px",onClick:this._clearSelectedImage},"ยกเลิก"),l.a.createElement(u.a,{className:"_w-128px _bgcl-accent _cl-white _bdcl-accent",onClick:this._removeMedia},"ลบภาพที่เลือก")),a&&l.a.createElement("div",{className:"jsx-4196647678 dropzone _mgbt-12px"},l.a.createElement(p.a,{onDrop:this._hadleUpload,className:"_w-100pct _h-256px _bdcl-warning-hover _bdcl-gray-300 _bdw-1px _dp-f _alit-ct _jtfct-ct _bdrd-4px",style:{borderStyle:"dashed"}},l.a.createElement("div",{className:"jsx-4196647678 _tal-ct"},l.a.createElement(u.a,{className:"_mgbt-8px",icon:"upload"},"เลือกไฟล์ที่ต้องการอัพโหลด"),l.a.createElement("p",{className:"jsx-4196647678 _fw-600"},"ขนาดไฟล์สูงสุด 2mb")))),r.length?l.a.createElement("div",{className:"jsx-4196647678 gallery"},r.map(function(t){return l.a.createElement("div",{key:t.id,onClick:function(){return e._selectImage(t.id)},className:"jsx-4196647678 _pst-rlt _cs-pt"},e._renderSelectedIcon(t.id),l.a.createElement("img",{width:"100%",src:"".concat(t.media_url),className:"jsx-4196647678"}))})):null,l.a.createElement(o.a,{styleId:"4196647678",css:[".gallery.jsx-4196647678{min-height:360px;display:grid;grid-template-columns:repeat(6,1fr);grid-gap:8px;}",".gallery.jsx-4196647678>div.jsx-4196647678>img.jsx-4196647678{border-radius:4px;width:100%;height:128px;object-fit:cover;}"]}))))}}])&&b(a.prototype,n),c&&b(a,c),t}();t.default=j}},[[616,1,0]]]);